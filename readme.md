## SqlUserTypeGenerator
Generates SQL user-defined table type (UDT) from C# class


For example, for this class:

```csharp
[SqlUserType(TypeName = "t_users")]
public class User
{
	public int Id { get; set; }
	public string Name { get; set; }
	public DateTime? DateOfBirth { get; set; }
}

```

following file will be generated

```sql
--autogenerated by SqlUserTypeGenerator v1.0.0.0

create type [t_user] as table (
	Id int not null,
	Name nvarchar(50) not null,
	DateOfBirth datetime null
)
go

```
### Usage
1. Install package:
```
Install-Package SqlUserTypeGenerator
```
2. add ```SqlUserType``` attribute with optional sql type name to class

3. build project; new file with sql type definition will be generated to GeneratedSqlTypes folder in project folder

### Types mapping
| .NET type| SQL type|
|-------|--------|
| Int64 | bigint |
| string | nvarchar |
| Boolean | bit |
| DateTime | datetime |
| Double | float |
| Int32 | int |
| Decimal | numeric |
| Guid | uniqueidentifier |
| Byte[] | varbinary |
| Byte | tinyint |

### Column length attribute
Use ```SqlUserTypeColumnPropertiesAttribute``` to define column length (for string and decimal):
```csharp
[SqlUserTypeColumnProperties(42)]
public string Name { get; set; }
```
```sql
Name nvarchar(42) not null
```

use ```SqlUserTypeColumnProperties(SqlUserTypeColumnPropertiesAttribute.MaxLength)``` for nvarchar(max)


### Notes

* Output folder for generated files can be customized by setting ```SqlUserTypeGenerator_TargetFolder``` property in csproj file
* Type pre-create and post-create code can be set via ```SqlUserTypeGenerator_TypePreCreateCode``` and  ```SqlUserTypeGenerator_TypePostCreateCode``` properties; ```$typename$``` string in this code will replaced to generated type name

(see file tools\SqlUserTypeGenerator_GlobalProps.props file in sample DbClassesWithCustomSqlFolder project)
